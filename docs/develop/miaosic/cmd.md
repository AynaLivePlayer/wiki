---
layout: doc
title: å‘½ä»¤è¡Œæµ‹è¯•å·¥å…·
---

# å‘½ä»¤è¡Œæµ‹è¯•å·¥å…·

> æºæ–‡æ¡£åœ°å€: [README.md](https://github.com/AynaLivePlayer/miaosic/blob/main/cmd/miaosic/README.md)
> 
> æ³¨æ„: æ”¹æ–‡æ¡£ç”±deepseekç”Ÿæˆï¼Œå®é™…å¯èƒ½ä¼šæœ‰é”™è¯¯

`miaosic` æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„éŸ³ä¹ä¿¡æ¯å‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒå¤šç§éŸ³ä¹å¹³å°ï¼ˆæä¾›è€…ï¼‰ï¼Œå¯ä»¥æœç´¢éŸ³ä¹ã€è·å–åª’ä½“ä¿¡æ¯ã€è·å–æ’­æ”¾URLã€ä¸‹è½½æ­Œè¯ä»¥åŠè¿›è¡ŒäºŒç»´ç ç™»å½•ç­‰æ“ä½œã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸµ æœç´¢éŸ³ä¹ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
- â„¹ï¸ è·å–åª’ä½“è¯¦ç»†ä¿¡æ¯
- ğŸ”— è·å–åª’ä½“æ’­æ”¾URLï¼ˆæ”¯æŒæŒ‡å®šéŸ³è´¨ï¼‰
- ğŸ“œ è·å–æ­Œè¯ï¼ˆæ”¯æŒå¤šè¯­è¨€ï¼‰
- ğŸ”‘ äºŒç»´ç ç™»å½•æ”¯æŒ
- ğŸ“‹ åˆ—å‡ºæ‰€æœ‰æ”¯æŒçš„æä¾›è€…åŠç™»å½•çŠ¶æ€
- ğŸ’¾ ä¼šè¯ç®¡ç†ï¼ˆè·¨å‘½ä»¤ä¿å­˜ç™»å½•çŠ¶æ€ï¼‰

## ä½¿ç”¨æŒ‡å—

### åŸºæœ¬å‘½ä»¤ç»“æ„

```bash
miaosic [å…¨å±€å‚æ•°] <å‘½ä»¤> [å‘½ä»¤å‚æ•°] [å‘½ä»¤æ ‡å¿—]
```

### å…¨å±€å‚æ•°

| å‚æ•° | ç¼©å†™ | æè¿° |
|------|------|------|
| `--session-file` | `-s` | æŒ‡å®šä¼šè¯æ–‡ä»¶è·¯å¾„ï¼ˆç”¨äºä¿å­˜ç™»å½•çŠ¶æ€ï¼‰ |

### å‘½ä»¤åˆ—è¡¨

#### 1. æœç´¢éŸ³ä¹ï¼š`search`

æœç´¢æŒ‡å®šæä¾›è€…çš„éŸ³ä¹ã€‚

```bash
./miaosic search <provider> <keyword> [flags]
```

**å‚æ•°ï¼š**
- `<provider>`: éŸ³ä¹æä¾›è€…ï¼ˆå¦‚ netease, qq ç­‰ï¼‰
- `<keyword>`: æœç´¢å…³é”®è¯

**æ ‡å¿—ï¼š**
- `-p, --page`: é¡µç ï¼ˆé»˜è®¤ï¼š1ï¼‰
- `--page-size`: æ¯é¡µç»“æœæ•°ï¼ˆé»˜è®¤ï¼š10ï¼‰

**ç¤ºä¾‹ï¼š**
```bash
./miaosic search netease "å‘¨æ°ä¼¦" -p 1 --page-size 5
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
Page.01 for "å‘¨æ°ä¼¦"
1. å±‹é¡¶ - å‘¨æ°ä¼¦,æ¸©å²š - ç”·å¥³æƒ…æ­Œå¯¹å”±å† å†›å…¨è®°å½• - 5257138
2. æƒ³ä½ å°±å†™ä¿¡ (Live) - å‘¨æ°ä¼¦,æç¡•,å¼ é‘« - ä¸­å›½æ–°æ­Œå£°ç¬¬äºŒå­£ ç¬¬13æœŸ - 509781655
3. å¸ƒæ‹‰æ ¼å¹¿åœº - è”¡ä¾æ—,å‘¨æ°ä¼¦ - çœ‹æˆ‘72å˜ - 210049
4. é»˜ (Live) - æè£æµ©,å‘¨æ°ä¼¦ - 2021ä¸­å›½å¥½å£°éŸ³ ç¬¬1æœŸ - 1888354230
5. å› ä¸ºçˆ±æƒ… (Live) - å‘¨æ°ä¼¦,é‚£è‹± - ä¸­å›½æ–°æ­Œå£°ç¬¬äºŒå­£ ç¬¬1æœŸ - 490595315
```

#### 2. è·å–åª’ä½“ä¿¡æ¯ï¼š`info`

è·å–æŒ‡å®šURIçš„åª’ä½“ä¿¡æ¯ã€‚

```bash
./miaosic info <provider> <uri>
```

**å‚æ•°ï¼š**
- `<provider>`: éŸ³ä¹æä¾›è€…
- `<uri>`: åª’ä½“URIï¼ˆURL æˆ– IDï¼‰

**ç¤ºä¾‹ï¼š**
```bash
./miaosic info netease 1827600686
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
Title: è¿˜æ˜¯ä¼šæƒ³ä½ 
Artist: æ—è¾¾æµª,h3R3
Album: è¿˜æ˜¯ä¼šæƒ³ä½ 
Cover https://p1.music.126.net/9FhSEQtMhP-JP3_U84YfWQ==/109951165798773745.jpg
Provider: netease
Identifier: 1827600686
```

#### 3. è·å–åª’ä½“URLï¼š`url`

è·å–æŒ‡å®šURIçš„åª’ä½“æ’­æ”¾URLã€‚(éƒ¨åˆ†æ­Œæºå¯èƒ½éœ€è¦ç™»é™†)

```bash
miaosic url <provider> <uri> [flags]
```

**å‚æ•°ï¼š**
- `<provider>`: éŸ³ä¹æä¾›è€…
- `<uri>`: åª’ä½“URI

**æ ‡å¿—ï¼š**
- `--quality`: éŸ³è´¨åå¥½ï¼ˆ128k, 192k, 256k, 320k, hq, sqï¼‰

**ç¤ºä¾‹ï¼š**
```bash
miaosic url netease 1827600686
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
URL 1:
  Quality: 320k
  URL: http://example.com/audio.mp3
  Headers:
    User-Agent: Mozilla/5.0
    Referer: http://example.com
```

#### 4. è·å–æ­Œè¯ï¼š`lyric`

è·å–æŒ‡å®šURIçš„æ­Œè¯ã€‚

```bash
miaosic lyric <provider> <uri> [flags]
```

**å‚æ•°ï¼š**
- `<provider>`: éŸ³ä¹æä¾›è€…
- `<uri>`: åª’ä½“URI

**æ ‡å¿—ï¼š**
- `-o, --output`: æŒ‡å®šè¾“å‡ºæ–‡ä»¶
- `--save`: è‡ªåŠ¨ä¿å­˜æ­Œè¯ï¼ˆæ–‡ä»¶åæ ¼å¼ï¼šæ­Œå_æ­Œæ‰‹å.lrcï¼‰

**ç¤ºä¾‹ï¼š**
```bash
# æ§åˆ¶å°è¾“å‡ºæ­Œè¯
miaosic lyric netease 1827600686

# ä¿å­˜æ­Œè¯åˆ°æŒ‡å®šæ–‡ä»¶
miaosic lyric netease 1827600686 -o lyrics.txt

# è‡ªåŠ¨ä¿å­˜æ­Œè¯
miaosic lyric netease 1827600686 --save
```

**è¾“å‡ºç¤ºä¾‹ï¼ˆæ§åˆ¶å°ï¼‰ï¼š**
```
Language: zh
-----
[00:00.00]æ­Œæ›²åï¼šæ™´å¤©
[00:05.00]æ­Œæ‰‹ï¼šå‘¨æ°ä¼¦
...
-----
Language: en
-----
[00:00.00]Song: Qing Tian
[00:05.00]Artist: Jay Chou
...
-----
```

#### 5. äºŒç»´ç ç™»å½•ï¼š`qrlogin`

æä¾›äºŒç»´ç ç™»å½•ç›¸å…³æ“ä½œã€‚

##### è·å–ç™»å½•äºŒç»´ç ï¼š`getqrcode`

```bash
miaosic qrlogin getqrcode <provider>
```

**å‚æ•°ï¼š**
- `<provider>`: æ”¯æŒç™»å½•çš„éŸ³ä¹æä¾›è€…

**ç¤ºä¾‹ï¼š**
```bash
miaosic qrlogin getqrcode netease
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
Scan this QR code to login:
[æ˜¾ç¤ºäºŒç»´ç å›¾ç‰‡]
Key: 1234567890abcdef
URL: https://login.example.com/qrcode?key=1234567890abcdef
```

##### éªŒè¯ç™»å½•ï¼š`verify`

```bash
miaosic qrlogin verify <provider> <key>
```

**å‚æ•°ï¼š**
- `<provider>`: éŸ³ä¹æä¾›è€…
- `<key>`: ä» getqrcode å‘½ä»¤è·å–çš„ key

**ç¤ºä¾‹ï¼š**
```bash
miaosic qrlogin verify netease 1234567890abcdef
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
Login successful!
Session: <session_string>
```

#### 6. åˆ—å‡ºæä¾›è€…ï¼š`providers`

åˆ—å‡ºæ‰€æœ‰æ³¨å†Œçš„æä¾›è€…åŠå…¶ç™»å½•çŠ¶æ€ã€‚

```bash
miaosic providers
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
 - bilibili-video: Not supported
 - kugou: Not logged in
 - kugou-instr: Not supported
 - kuwo: Not supported
 - netease: Logged in
```

## é…ç½®æ–‡ä»¶

ä½¿ç”¨ `--session-file` å‚æ•°æŒ‡å®šä¼šè¯æ–‡ä»¶è·¯å¾„ï¼Œä»¥ä¾¿åœ¨ä¸åŒå‘½ä»¤ä¹‹é—´ä¿æŒç™»å½•çŠ¶æ€ï¼š

```bash
miaosic --session-file ~/.miaosic_session.json providers
```

ä¼šè¯æ–‡ä»¶æ ¼å¼ä¸º JSONï¼š
```json
{
  "netease": "session_string_here",
  "qq": "another_session_string"
}
```

## æ”¯æŒçš„æä¾›è€…

| æä¾›è€…            | æœç´¢ | åª’ä½“ä¿¡æ¯ | æ’­æ”¾URL | æ­Œè¯ | ç™»å½• |
|----------------|------|----------|---------|------|------|
| netease        | âœ“ | âœ“ | âœ“ | âœ“ | âœ“ |
| kuwo           | âœ“ | âœ“ | âœ“ | âœ“ | âœ— |
| kugou          | âœ“ | âœ“ | âœ“ | âœ“ | âœ“ |
| bilibili-video | âœ“ | âœ“ | âœ“ | âœ“ | âœ— |


## å¸¸è§é—®é¢˜

### å¦‚ä½•ä¿å­˜ç™»å½•çŠ¶æ€ï¼Ÿ

ä½¿ç”¨ `--session-file` å‚æ•°æŒ‡å®šä¼šè¯æ–‡ä»¶è·¯å¾„ï¼š
```bash
miaosic --session-file ~/.miaosic_session.json qrlogin getqrcode netease
miaosic --session-file ~/.miaosic_session.json qrlogin verify netease <key>
```

### ä¸ºä»€ä¹ˆäºŒç»´ç åœ¨æˆ‘çš„ç»ˆç«¯ä¸æ˜¾ç¤ºï¼Ÿ

ç¡®ä¿æ‚¨ä½¿ç”¨çš„ç»ˆç«¯æ”¯æŒæ˜¾ç¤ºå›¾ç‰‡ï¼ˆå¦‚ iTerm2ã€Windows Terminal ç­‰ï¼‰ã€‚å¦‚æœä¸æ”¯æŒï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å…¶ä»–ç»ˆç«¯æˆ–ä½¿ç”¨æ–‡æœ¬æ¨¡å¼çš„äºŒç»´ç å®ç°ã€‚

### å¦‚ä½•æ·»åŠ æ–°çš„éŸ³ä¹æä¾›è€…ï¼Ÿ

1. å®ç° `miaosic.MediaProvider` æ¥å£